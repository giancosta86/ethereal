# ethereal

_Elegant utilities for the Elvish shell_

![Logo](logo.png)

**ethereal** is a collection of _utility modules_ for the [Elvish](https://elv.sh/) shell - providing a gallery of _common patterns_ in a variety of domains, especially focusing on _minimalism_ and _functional programming_.

## Installation

The library can be installed via **epm** - in particular:

```elvish
use epm

epm:install github.com/giancosta86/ethereal
```

even better, if you have [epm-plus](https://github.com/giancosta86/epm-plus), you can run:

```elvish
epm:install github.com/giancosta86/ethereal@v1
```

or any other specific Git reference.

## Usage

This section only contains very high-level descriptions; for details about using each module, please refer to:

- the documentation comments in the source module itself

- the related **.test.elv** test script - based on the [Velvet](https://github.com/giancosta86/velvet) test framework

### Input values

Several functions mention taking **input values** - which means they can be received:

- from the argument list

- via pipe

although _not from both at once_.

For example, **via argument list**:

```elvish
exception:is-return ?(fail DODO) |
  should-be $true
```

whereas **via pipe**:

```elvish
put ?(fail DODO) |
  exception:is-return |
  should-be $true
```

This feature is enabled and _standardized all over the library_ by the `get-single-input` and `get-inputs` functions, exported by the [lang](lang.elv) module.

As an interesting consequence, during an interactive session, when calling with no arguments any function adopting this protocol, it is recommended to pipe from `all []`, so as to prevent the terminal from interactively asking such input via **stdin**.

### Modules

- [command](command.elv): data and exception capturing for commands and blocks, plus inspection functions.

- [curl](curl.elv): utilities for the `curl` command-line client.

- [diff](diff.elv): easy way to apply the **diff** system command to two arbitrary values.

- [edit](edit.elv]): in-place file editing.

- [exception](exception.elv): exception type checking and metadata.

- [fake-git](fake-git.elv): tiny, customizable in-memory subset of the Git command.

- [fs](fs.elv): advanced file system management.

- [image](image.elv): image transforms, mainly based on the `gm` command.

- [lang](lang.elv): core, almost language-related utilities.

- [map](map.elv): functional-style map manipulation.

- [resources](resources.elv): convenient way to access the resources associated with a script file.

- [semver](semver.elv): semantic versions - parsing, inspection and comparison.

- [seq](seq.elv): functional-style sequence manipulation - especially `reduce` and fairly sophisticated ones, such as `split-by-chunk-count` and `equivalence-classes`.

- [set](set.elv): full-fledged set type, with dedicated operations.

- [sha](sha.elv): computation of SHA hash codes.

- [string](string.elv): advanced string editing.

- [tracer](tracer.elv): conditional text output to streams and files.

- [tracer/from-env-var](tracer/from-env-var.elv): tracer whose state depends on a given env var.

- [tracer/on-off](tracer/on-off.elv): tracer with additional methods for enabling/disabling its output.

- [writer](writer.elv): a writer takes _a no-arg block_ and writes its output to some destination - stdout, stderr, file...

## Credits

Logo image generated by **Grok** and manually retouched via **GIMP**, with **Google Fonts**.

## Further references

- [Elvish](https://elv.sh/)

- [Velvet](https://github.com/giancosta86/velvet) - _Smooth, functional testing in the Elvish shell_

- [epm-plus](https://github.com/giancosta86/epm-plus) - _Package versioning for epm in Elvish_
